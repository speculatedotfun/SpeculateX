specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: SpeculateCore
    network: bsc
    source:
      address: "0x101450a49E730d2e9502467242d0B6f157BABe60"
      abi: SpeculateCore
      startBlock: 73199900  # Deployment block: 0x45d1b53 (73199955), using slightly earlier for safety
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Market
        - Trade
        - PositionBalance
        - Redemption
        - User
        - GlobalState
      abis:
        - name: SpeculateCore
          file: ./abis/SpeculateCore.json
      eventHandlers:
        - event: MarketCreated(indexed uint256,address,address,bytes32,string,uint256,uint256)
          handler: handleMarketCreated
        - event: Buy(indexed uint256,indexed address,bool,uint256,uint256,uint256)
          handler: handleBuy
        - event: Sell(indexed uint256,indexed address,bool,uint256,uint256,uint256)
          handler: handleSell
        - event: Redeemed(indexed uint256,indexed address,uint256)
          handler: handleRedeemed
        - event: MarketResolved(indexed uint256,bool)
          handler: handleMarketResolved
      file: ./src/mapping.ts

