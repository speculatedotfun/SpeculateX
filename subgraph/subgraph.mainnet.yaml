specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: SpeculateCore
    network: bsc
    source:
      address: "0xDCdAf5219c7Cb8aB83475A4562e2c6Eb7B2a3725"
      abi: SpeculateCore
      startBlock: 77000000  # Will find events from deployment
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Market
        - Trade
        - PositionBalance
        - Redemption
        - User
        - GlobalState
      abis:
        - name: SpeculateCore
          file: ./abis/SpeculateCore.json
      eventHandlers:
        - event: MarketCreated(indexed uint256,address,address,string,uint256,uint256)
          handler: handleMarketCreated
        - event: Buy(indexed uint256,indexed address,bool,uint256,uint256,uint256)
          handler: handleBuy
        - event: Sell(indexed uint256,indexed address,bool,uint256,uint256,uint256)
          handler: handleSell
        - event: Redeemed(indexed uint256,indexed address,uint256)
          handler: handleRedeemed
        - event: MarketResolved(indexed uint256,bool)
          handler: handleMarketResolved
      file: ./src/mapping.ts

